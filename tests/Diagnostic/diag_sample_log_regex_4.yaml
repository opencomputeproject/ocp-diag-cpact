test_scenario:
  test_id: DG_4S
  test_name: DiagSampleLogRegex4
  test_description: |
                    Sample Diagnostic recipe to search for a regex string 
                    with multiple assignment of which one them is called out as DRC, 
                    and the other two are associated fields.
  test_group: Diag
  tags: [Diag, Sample]

  test_steps:
  - step_id: step_001
    step_name: SearchForRegexAssignDRCWithFields
    step_description: Search for a regex string in log and assign a DRC with associated fields.
    connection_type: Local
    connection: Local
    step_type: log_analysis
    log_analysis_path: ../sample_workspace/test_run.log
    validator_type: regex
    diagnostic_analysis:
    - search_string: (?P<ErrorCode>ERR-(?=\d*[1-9])\d+)\s*\|\s*[^\|]*\s*\|\s*[^\|]*\s*\|\s*[^\|]*\s*\|\s*(?P<Component_ID>[^\|]+)
      diagnostic_result_code: Error_Code
      parameter_to_set: error_code

    - search_string: (?P<Error_Code>FAIL-(?=\d*[1-9])\d+)\s*\|.*?\|.*?\|.*?\|(?P<Component_ID>[^\|]+)\|\s*(?P<Notes>.*?)(?=(\nFAIL-|$))
      diagnostic_result_code: Error_Code
      parameter_to_set: error_code


  #Note:- Multiple instance of the same search string will still yield only one DRC.
  #       e.g. if the search string is found 3 times in the log,